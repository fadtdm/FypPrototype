<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - SME Analytics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>SME Analytics</span>
                </a>
                
                <div class="user-menu">
                    <div class="avatar">JD</div>
                    <span>John Doe</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
        
        <nav class="main-nav">
            <div class="container">
                <ul class="nav-links">
                    <li><a href="index.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="data.html"><i class="fas fa-database"></i> Data</a></li>
                    <li><a href="analytics.html" class="active"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                    <li><a href="design.html"><i class="fas fa-palette"></i> Design</a></li>
                    <li><a href="users.html"><i class="fas fa-users"></i> Users</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Advanced Analytics</h1>
            <p>Filter and analyze your data with precision</p>
        </div>

        <!-- Filters -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div class="card-header">
                <h3><i class="fas fa-filter"></i> Apply Filters</h3>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem;">
                <div class="input-group">
                    <label>Date Range</label>
                    <select id="dateRange">
                        <option>Last 7 days</option>
                        <option>Last 30 days</option>
                        <option>Last quarter</option>
                        <option>Last year</option>
                        <option>Custom range</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Category</label>
                    <select id="category">
                        <option>All Categories</option>
                        <option>Electronics</option>
                        <option>Clothing</option>
                        <option>Home & Garden</option>
                        <option>Books</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Region</label>
                    <select id="region">
                        <option>All Regions</option>
                        <option>North America</option>
                        <option>Europe</option>
                        <option>Asia Pacific</option>
                        <option>Other</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Customer Segment</label>
                    <select id="segment">
                        <option>All Segments</option>
                        <option>Enterprise</option>
                        <option>Small Business</option>
                        <option>Individual</option>
                    </select>
                </div>
            </div>
            
            <div style="text-align: right; margin-top: 1.5rem;">
                <button class="btn btn-outline" onclick="resetFilters()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn btn-primary" onclick="applyFilters()">
                    <i class="fas fa-chart-bar"></i> Apply Filters
                </button>
            </div>
        </div>

        <!-- Interactive Charts -->
        <div class="dashboard-grid">
            <!-- Performance Metrics -->
            <div class="card" style="grid-column: span 6;">
                <div class="card-header">
                    <h3><i class="fas fa-trending-up"></i> Performance Trends</h3>
                </div>
                
                <div class="chart-container" id="performanceChart">
                    <!-- Chart will be rendered by JavaScript -->
                </div>
                
                <div style="text-align: center; margin-top: 1rem;">
                    <div class="filter-group">
                        <button class="filter-btn active" onclick="changeMetric('revenue')">Revenue</button>
                        <button class="filter-btn" onclick="changeMetric('orders')">Orders</button>
                        <button class="filter-btn" onclick="changeMetric('conversion')">Conversion</button>
                    </div>
                </div>
            </div>
            
            <!-- Regional Distribution -->
            <div class="card" style="grid-column: span 6;">
                <div class="card-header">
                    <h3><i class="fas fa-globe"></i> Regional Distribution</h3>
                </div>
                
                <div style="display: flex; align-items: flex-end; height: 250px; gap: 20px; 
                     justify-content: center; margin: 2rem 0;">
                    <div class="region-bar" data-region="North America" data-value="45" 
                         style="height: 180px; width: 40px; background: linear-gradient(to top, #3b82f6, #60a5fa);"></div>
                    <div class="region-bar" data-region="Europe" data-value="32" 
                         style="height: 128px; width: 40px; background: linear-gradient(to top, #8b5cf6, #a78bfa);"></div>
                    <div class="region-bar" data-region="Asia Pacific" data-value="18" 
                         style="height: 72px; width: 40px; background: linear-gradient(to top, #10b981, #34d399);"></div>
                    <div class="region-bar" data-region="Other" data-value="5" 
                         style="height: 20px; width: 40px; background: linear-gradient(to top, #f59e0b, #fbbf24);"></div>
                </div>
                
                <div id="regionLabels" style="display: flex; justify-content: space-around; margin-top: 1rem;"></div>
            </div>
        </div>

        <!-- Insights -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header">
                <h3><i class="fas fa-lightbulb"></i> Insights & Recommendations</h3>
            </div>
            
            <div id="insightsContainer" style="padding: 1rem;">
                <!-- Insights will be loaded here -->
            </div>
        </div>
    </main>

    <script>
        let currentMetric = 'revenue';
        const metricsData = {
            revenue: [42000, 52000, 58000, 62000, 71000, 85000, 92000, 88000, 95000, 105000, 118000, 125000],
            orders: [420, 520, 580, 620, 710, 850, 920, 880, 950, 1050, 1180, 1250],
            conversion: [2.8, 3.1, 3.4, 3.6, 3.8, 4.1, 4.3, 4.0, 4.2, 4.5, 4.8, 5.0]
        };

        function renderPerformanceChart() {
            const container = document.getElementById('performanceChart');
            const data = metricsData[currentMetric];
            const maxValue = Math.max(...data);
            
            container.innerHTML = '';
            
            data.forEach((value, index) => {
                const barHeight = (value / maxValue) * 200;
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.width = '40px';
                bar.style.height = `${barHeight}px`;
                bar.style.left = `${50 + index * 50}px`;
                bar.dataset.value = value;
                bar.dataset.month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
                                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][index];
                
                bar.addEventListener('mouseenter', function() {
                    showChartTooltip(this, {
                        month: this.dataset.month,
                        value: this.dataset.value,
                        metric: currentMetric === 'revenue' ? 'Revenue' : 
                               currentMetric === 'orders' ? 'Orders' : 'Conversion Rate',
                        unit: currentMetric === 'revenue' ? '$' : currentMetric === 'conversion' ? '%' : ''
                    });
                });
                
                bar.addEventListener('mouseleave', hideChartTooltip);
                
                container.appendChild(bar);
            });
        }

        function changeMetric(metric) {
            currentMetric = metric;
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderPerformanceChart();
            updateInsights();
        }

        function setupRegionBars() {
            const regionBars = document.querySelectorAll('.region-bar');
            const regionLabels = document.getElementById('regionLabels');
            
            regionLabels.innerHTML = '';
            
            regionBars.forEach(bar => {
                const label = document.createElement('div');
                label.textContent = bar.dataset.region;
                label.style.textAlign = 'center';
                label.style.fontSize = '0.875rem';
                label.style.color = 'var(--gray)';
                regionLabels.appendChild(label);
                
                bar.addEventListener('mouseenter', function() {
                    showChartTooltip(this, {
                        region: this.dataset.region,
                        share: `${this.dataset.value}% of total revenue`,
                        revenue: `~$${Math.round(125000 * (this.dataset.value/100)).toLocaleString()}`
                    });
                });
                
                bar.addEventListener('mouseleave', hideChartTooltip);
            });
        }

        function applyFilters() {
            const dateRange = document.getElementById('dateRange').value;
            const category = document.getElementById('category').value;
            const region = document.getElementById('region').value;
            const segment = document.getElementById('segment').value;
            
            // Simulate filter application
            document.querySelector('.card-header h3').innerHTML = 
                `<i class="fas fa-filter"></i> Filters Applied: ${category}, ${region}, ${segment}`;
            
            updateInsights();
            
            // Show notification
            alert(`Filters applied:\nâ€¢ Date: ${dateRange}\nâ€¢ Category: ${category}\nâ€¢ Region: ${region}\nâ€¢ Segment: ${segment}`);
        }

        function resetFilters() {
            document.getElementById('dateRange').value = 'Last 7 days';
            document.getElementById('category').value = 'All Categories';
            document.getElementById('region').value = 'All Regions';
            document.getElementById('segment').value = 'All Segments';
            
            document.querySelector('.card-header h3').innerHTML = `<i class="fas fa-filter"></i> Apply Filters`;
            updateInsights();
        }

        function updateInsights() {
            const insights = [
                "ðŸ“ˆ Revenue increased by 12.5% compared to last month",
                "ðŸ‘¥ Top performing region: North America (45% of total revenue)",
                "ðŸ›’ Average order value: $124.50 (8.1% increase)",
                "ðŸŽ¯ Best converting category: Electronics (3.8% conversion rate)",
                "ðŸ“Š Customer retention rate: 78% (2% improvement)"
            ];
            
            const container = document.getElementById('insightsContainer');
            container.innerHTML = insights.map(insight => `
                <div style="padding: 12px; margin-bottom: 10px; background: var(--light); 
                     border-radius: 6px; border-left: 4px solid var(--primary);">
                    ${insight}
                </div>
            `).join('');
        }

        function showChartTooltip(element, data) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.style.position = 'fixed';
            tooltip.style.background = 'white';
            tooltip.style.border = '1px solid var(--border)';
            tooltip.style.borderRadius = '8px';
            tooltip.style.padding = '1rem';
            tooltip.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';
            tooltip.style.zIndex = '1000';
            
            tooltip.innerHTML = `
                <h4>${data.month || data.region || 'Data Point'}</h4>
                ${data.value ? `<p><strong>${data.metric}:</strong> ${data.unit}${Number(data.value).toLocaleString()}</p>` : ''}
                ${data.share ? `<p><strong>Share:</strong> ${data.share}</p>` : ''}
                ${data.revenue ? `<p><strong>Revenue:</strong> ${data.revenue}</p>` : ''}
            `;
            
            document.body.appendChild(tooltip);
            
            const rect = element.getBoundingClientRect();
            tooltip.style.left = `${rect.left + rect.width/2 - tooltip.offsetWidth/2}px`;
            tooltip.style.top = `${rect.top - tooltip.offsetHeight - 10}px`;
            
            element.tooltip = tooltip;
        }

        function hideChartTooltip() {
            const tooltips = document.querySelectorAll('.tooltip');
            tooltips.forEach(tooltip => tooltip.remove());
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderPerformanceChart();
            setupRegionBars();
            updateInsights();
        });
    </script>
</body>
</html>